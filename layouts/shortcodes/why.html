{{ $title := .Get "title" }}
{{ $description := .Get "description" }}
{{ $path := .Get "path" }}

<section>
  <div class="container">
    <div class="row">
      <div class="col-8 offset-2">
        <h2 class="why__title text-center">
          {{ if $title }}
          {{ $title }}
          {{ else }}
          {{ $.Page.Title }}
          {{ end }}
        </h2>
        <p class="why__paragraph text-center mt-3 d-sm-flex d-none">
          {{ if $description }}
          {{ .Inner | markdownify }}
          {{ else }}
          {{ $.Page.Description }}
          {{ end }}
        </p>
      </div>
    </div>
    <div class="row mt-sm-0 mt-md-5">
      {{ if $path }}
      {{ $blocks := where .Site.RegularPages "Type" "in" $path }}
      {{ range $blocks }}
      <div class="why__block col-md-6 col-lg-3 d-flex flex-column align-items-center mt-5 mt-lg-0">
        <div class="d-flex flex-column align-items-center justify-content-center mb-5">
          {{ if .Params.icon }}
          <img class="why__image" src="{{ .Params.icon }}">
          {{ end }}
          <h3 class="why__block-title text-center mt-4 not-apply">{{ .Title }}</h3>
          <div class="why__block-body text-center mt-4 d-sm-flex">
            {{ .Content | markdownify }}
          </div>
        </div>
      </div>
      {{ end }}
      {{ else }}
      {{ $blocks := where .Site.RegularPages "Type" "in" "why-home" }}
      {{ range $blocks }}
      <div class="why__block col-md-6 col-lg-3 d-flex flex-column align-items-center mt-5 mt-lg-0">
        <div class="d-flex flex-column align-items-center justify-content-center mb-5">
          {{ if .Params.icon }}
          <img class="why__image" src="{{ .Params.icon }}">
          {{ end }}
          <h3 class="why__block-title text-center mt-4 not-apply">{{ .Title }}</h3>
          <div id="{{ .Params.id }}" class="why__block-body text-center mt-4 d-sm-flex collapse">
            {{ .Content | markdownify }}
          </div>
          <a id="{{ .Params.id }}btn" class="d-sm-none d-flex mt-4" href="#" data-toggle="collapse" data-target="#{{ .Params.id }}"
             onclick="learnMore({{ .Params.id }})">Learn more</a>
        </div>
      </div>
      {{ end }}
      {{ end }}
    </div>
  </div>
</section>
