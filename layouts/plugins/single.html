{{ define "main" }}

{{ partial "components/hero-panel" . }}

<script>
  const pluginsList = {{ .Site.Data.en.plugins_list }}
</script>

<section class="plugins">
  <div class="container">
    <div class="row">
      <div class="col-lg-4 col-sm-12">
        <div class="plugins-small__field-wrapper input-group mb-3">
          <input type="text"
                 id="searchInput"
                 class="plugins-small__search-input"
                 placeholder="Search plugins by name"
                 onkeyup="search()"
          >
          <div class="input-group-prepend">
          </div>
        </div>
      </div>
      <div class="col-lg-8">
        <div class="plugins-small__field-wrapper input-group mb-3">
          <div class="plugins-small__chips">
          </div>
          <div class="plugins-small__select" onclick="onSelect()">
            {{ .Params.filter_title }}
            <ul class="plugins-small__select-wrapper">
              {{ range .Params.select_types }}
              <li>
                <input type="checkbox" id="{{ . }}" class="plugins-small__checkbox" name="type" value="{{ . }}" />
                <div class="checkmark"></div>
                <label for="{{ . }}">{{ humanize . }}</label>
              </li>
              {{ end }}
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="plugins__quantity-wrapper" style="display: none">
          <span class="plugins__quantity"></span> Plugin displayed
        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <ul class="plugins-small__wrapper">
      {{ $data := index .Site.Data .Site.Language.Lang }}
      {{ $index := -1 }}
      {{ range $plugins := $data.plugins_list }}
      <li class="plugins-small__item mt-5 ml-auto mr-auto ml-md-0 mr-md-4" data-select="{{ lower .Type }}" data-title='{{ with (index . "Display Name") }}{{ . }}{{ end }}'>
        <div class="plugins-small__image">
          {{ if or (eq (index . "Icon") "N/A") (not (index . "Icon")) }}
          <img src="/images/icons/socket.png"/>
          {{ else }}
          {{ .Icon | safeHTML }}
          {{ end }}
        </div>
        {{ $index = add $index 1 }}
        <div class="plugins-small__title mt-3">{{ with (index . "Display Name") }}{{ . }}{{ end }}</div>
        <div class="plugins-small__type mt-4">{{ with (index . "Type") }}{{ . }}{{ end }}</div>
        <div class="plugins-small__cta-wrapper" onclick="toggleDetails({{$index}})">
          <a class="plugins-small__cta">View details</a>
        </div>
        <div class="plugins-small__inner-description" id="{{$index}}">
          <div class="plugins-small__inner-description-title">ADLS Batch Sink</div>
          <div class="plugins-small__inner-description-body">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit.
            Phasellus tempor magna a tincidunt facilisis. Sed id pulvinar tellus. Nulla et massa lacus.
          </div>
          <div class="plugins-small__cta-wrapper">
            <a class="plugins-small__cta-hide" onclick="toggleDetails({{$index}})">Hide details</a>
          </div>
        </div>
      </li>
      {{ end }}
    </ul>
    <div class="plugins-small__search-result" style="display: none">{{ .Site.Params.noResults.title }}</div>
  </div>
</section>

{{ end }}
